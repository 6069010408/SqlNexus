<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="QuickStartPostmortemAnalysis_files/filelist.xml">
<title>Quick Start (Live Server Monitoring)</title>
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 3 0 0 0 0 0 0 0;
	mso-font-alt:\65B0\7D30\660E\9AD4;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 137232384 22 0 1048577 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"\@PMingLiU";
	panose-1:2 2 3 0 0 0 0 0 0 0;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 137232384 22 0 1048577 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Trebuchet MS";
	mso-fareast-font-family:PMingLiU;
	mso-bidi-font-family:"Times New Roman";}
h1
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:"Trebuchet MS";}
h2
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:"Trebuchet MS";
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:12.0pt;
	font-family:"Trebuchet MS";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:.5in .5in .5in .5in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:536436277;
	mso-list-template-ids:-1444132514;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<h1>Quick Start (Postmortem Analysis)</h1>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This topic describes how you can use SQL Nexus to perform
offline analysis of Profiler trace data that was previously-collected from
either SQL Server 2000 or SQL Server 2005.&nbsp; For information about live
server monitoring, see the <b><i>Quick Start (Live Server Monitoring)</i></b>
topic.&nbsp; </p>

<p class=MsoNormal>&nbsp;</p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='margin-bottom:12.0pt;mso-list:l0 level1 lfo1;
     tab-stops:list .5in'>Capture a SQL Profiler trace that includes at least
     the SQL<span class=GramE>:BatchCompleted</span> and RPC:Completed
     events.&nbsp; If you are using SQL Server 2005, one easy way to capture
     such a trace is to use SQLDIAG.&nbsp; On the server you want to monitor,
     click Start <span style='font-family:Wingdings'>à</span> Run, and execute
     this command on the server that you want to monitor: <br>
     <br>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQLDIAG
     /I <span class=SpellE>SD_General.XML</span><br>
     <br>
     By default, the output files (including Profiler trace data) will be
     written to C:\Program Files\Microsoft SQL
     Server\90\Tools\Binn\SQLDIAG.&nbsp; You can redirect the trace to a
     different folder by including the /O command line parameter, like this: <br>
     <br>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQLDIAG
     /I <span class=SpellE>SD_General.XML</span> /O m:\tracedata <br>
     <br>
     <span class=GramE>To</span> stop the data capture, hit CTRL+C in the
     SQLDIAG console window.&nbsp; For additional information about using
     SQLDIAG to capture data, see the <a
     href="http://msdn2.microsoft.com/en-us/library/ms162833.aspx"><span
     class=SpellE>SQLdiag</span> Utility</a> topic in SQL Server 2005 Books
     Online. </li>
 <li class=MsoNormal style='margin-bottom:12.0pt;mso-list:l0 level1 lfo1;
     tab-stops:list .5in'>Use TraceBuster.exe to import the Profiler trace
     data.&nbsp; You may collect the trace on one SQL Server instance and
     import/analyze the data offline on another instance.&nbsp; You can find
     TraceBuster.exe in the “Collection” subfolder within the directory where
     SQL Nexus is installed.&nbsp; For example, if your trace files are in
     C:\trace, and if you want to import the trace data to a SQL Server
     instance called SQLQA01, you could use a command line like this one: <br>
     <br>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     TraceBuster.exe -<span class=SpellE>iC</span>:\trace\*.<span class=SpellE>trc</span>
     –Ssqlqa01 -E</li>
 <li class=MsoNormal style='margin-bottom:12.0pt;mso-list:l0 level1 lfo1;
     tab-stops:list .5in'>Once the trace data has been loaded, execute the <span
     class=SpellE>TraceAnalysis.tem</span> SQL Script (despite the non-standard
     file extension, this can be executed just like is any other .SQL script
     file).&nbsp; <span class=SpellE>TraceAnalysis.tem</span> is located in the
     “Collection” subfolder within the directory where SQL Nexus is
     installed.&nbsp; You can use a standard script execution tool like <span
     class=SpellE>sqlcmd</span>, osql, or Query Analyzer.&nbsp; This command
     shows <span class=SpellE>TraceAnalysis.tem</span> being executed using <span
     class=SpellE>sqlcmd</span>: <br>
     <br>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
     class=SpellE>sqlcmd</span> –Ssqlqa01 –E –<span class=SpellE>i</span>&lt;<span
     class=SpellE>sql_nexus_dir</span>&gt;\Collection\<span class=SpellE>TraceAnalysis.tem</span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Finally,
     launch SQL Nexus.&nbsp; When prompted to start the SQLDIAG data collector,
     answer <span class=GramE><i>No</i></span>.</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Select
     the “Profiler Trace Analysis” to see a list of the most expensive queries
     in the captured workload.&nbsp; You can sort the list by cumulative CPU
     cost, reads, writes, or duration.&nbsp; <span class=SpellE>Cick</span> the
     Report Parameters button in the report toolbar to zoom into a particular
     time window.&nbsp; Click on any of the queries to drill into a more
     detailed report showing the execution characteristics of that query over
     time.&nbsp; </li>
</ol>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
